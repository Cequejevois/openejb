
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
  <HEAD>
    <!-- $PAGETITLE -->
    <TITLE>OpenEJB - Spring and OpenEJB 3.0</TITLE>
    <LINK href="http://openejb.apache.org/all.css" rel="stylesheet" type="text/css">
    <!--[if IE]><link rel="stylesheet" type="text/css" media="screen, projection" href="openejb.apache.org/ie.css"><![endif]-->

    <LINK rel="SHORTCUT ICON" href="http://openejb.apache.org/images/favicon.ico">
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8">
  </HEAD>
  <BODY>

    <!-- Delay the loading of the external javascript file needed for labels (as it takes too long to load and visibly holds loading of the page body) -->
    <!-- To do this without javascript errors over undefined functions, we need to declare stubs here (that are overrided later by the proper implementations) -->
    <SCRIPT language="JavaScript" type="text/javascript">
      function doAddLabel(hideTextfieldAfterAddParam)
      {
      // stub
      }

      function onAddLabel()
      {
      // stub
      }

      function showLabelsInput()
      {
      // stub
      }
    </SCRIPT>

    <A name="top"></A>
    <TABLE class="frameTable" cellpadding="0" cellspacing="0" border="0">
      <TR class="Row1">
        <TD class="Col1"><IMG alt="" src="http://openejb.apache.org/images/dotTrans.gif"></TD>
        <TD class="Col2"><IMG alt="" src="http://openejb.apache.org/images/dotTrans.gif"></TD>
        <TD class="Col3"><IMG alt="" src="http://openejb.apache.org/images/dotTrans.gif"></TD>
        <TD class="Col4"><IMG alt="" src="http://openejb.apache.org/images/dotTrans.gif"></TD>
        <TD class="Col5"><IMG alt="" src="http://openejb.apache.org/images/dotTrans.gif"></TD>
      </TR>
      <TR class="Row2">
        <TD class="Col1"><IMG alt="" src="http://openejb.apache.org/images/dotTrans.gif"></TD>
        <TD class="Col2">&nbsp;</TD>
        <TD class="Col3" id="breadcrumbs">
          <!-- $TOP_NAV_BAR -->
                    <A href="../OPENEJB/index.html" title="Index">Home</A> | <A href="../OPENEJB/download.html" title="Download">Download</A> | <A href="../OPENEJB/mailing-lists.html" title="Mailing Lists">Lists</A> | <A href="http://issues.apache.org/jira/browse/OPENEJB" class="external-link" rel="nofollow">Issues</A>

        </TD>
        <TD class="Col4"><IMG alt="" src="http://openejb.apache.org/images/dotTrans.gif"></TD>
        <TD class="Col5">&nbsp;</TD>
      </TR>
      <TR class="Row3">
        <TD class="Col1"><IMG alt="" class="Row3Img" id="thinLine" src="http://openejb.apache.org/images/line_sm.gif"></TD>
        <TD class="Col2"><IMG alt="" class="Row3Img" src="http://openejb.apache.org/images/dotTrans.gif"></TD>
        <TD class="Col3"><IMG alt="" class="Row3Img" src="http://openejb.apache.org/images/dotTrans.gif"></TD>
        <TD class="Col4"><IMG alt="" src="http://openejb.apache.org/images/dotTrans.gif"></TD>
        <TD class="Col5"><IMG alt="" class="Row3Img" src="http://openejb.apache.org/images/dotTrans.gif"></TD>
      </TR>
      <TR class="Row4">
        <TD class="Col1">
          <SPAN id="Navigation">

                        <H3><A name="Navigation-Overview"></A>Overview</H3>

<UL class="alternate" type="square">
	<LI><A href="../OPENEJB/index.html" title="Index">Home</A></LI>
	<LI><A href="../OPENEJB/news.html" title="News">News</A></LI>
	<LI><A href="../OPENEJB/faq.html" title="FAQ">FAQ</A></LI>
	<LI><A href="../OPENEJB/download.html" title="Download">Download</A></LI>
	<LI><A href="index.html" title="Index">Documentation</A></LI>
	<LI><A href="../OPENEJB/examples.html" title="Examples">Examples</A></LI>
	<LI><A href="http://cwiki.apache.org/confluence/display/OPENEJB/Lightening%20Demos" class="external-link" rel="nofollow">Lightning Demos</A></LI>
	<LI><A href="../OPENEJB/mailing-lists.html" title="Mailing Lists">Mailing Lists</A></LI>
	<LI><A href="../OPENEJB/source-code.html" title="Source Code">Source Code</A></LI>
	<LI><A href="http://blogs.apache.org/openejb" class="external-link" rel="nofollow">Project Blog</A></LI>
</UL>


<H3><A name="Navigation-Servers"></A>Servers</H3>

<UL class="alternate" type="square">
	<LI><A href="../OPENEJB/local-server.html" title="Local Server">Local</A></LI>
	<LI><A href="../OPENEJB/remote-server.html" title="Remote Server">Remote</A></LI>
</UL>


<H3><A name="Navigation-Integrations"></A>Integrations</H3>

<UL class="alternate" type="square">
	<LI><A href="tomcat.html" title="Tomcat">Tomcat</A></LI>
	<LI><A href="../OPENEJB/geronimo.html" title="Geronimo">Geronimo</A></LI>
	<LI><A href="../OPENEJB/webobjects.html" title="WebObjects">WebObjects</A></LI>
</UL>


<H3><A name="Navigation-Community"></A>Community</H3>

<UL class="alternate" type="square">
	<LI><A href="../OPENEJB/team.html" title="Team">Team</A></LI>
	<LI><A href="../OPENEJB/articles.html" title="Articles">Articles</A></LI>
	<LI><A href="http://webchat.freenode.net/?channels=openejb" class="external-link" rel="nofollow">IRC</A></LI>
</UL>


<H3><A name="Navigation-RelatedProjects"></A>Related Projects</H3>

<UL class="alternate" type="square">
	<LI><A href="http://activemq.apache.org/" class="external-link" rel="nofollow">ActiveMQ</A></LI>
	<LI><A href="http://openjpa.apache.org/" class="external-link" rel="nofollow">OpenJPA</A></LI>
	<LI><A href="http://cxf.apache.org/" class="external-link" rel="nofollow">CXF</A></LI>
</UL>


<H3><A name="Navigation-Index"></A>Index</H3>
<UL class="alternate" type="square">
	<LI><A href="../OPENEJB/space-index.html" title="Space Index">Site Index</A></LI>
	<LI><A href="space-index.html" title="Space Index">Doc Index</A></LI>
</UL>

            <H3>
              <A name="Navigation-Feeds"></A>
              Feeds
            </H3>

            <UL class="feeds">
            <LI>
              <A href="http://cwiki.apache.org/confluence/spaces/rss.action?key=OPENEJB&newPages=false">
              <IMG src="http://openejb.apache.org/images/rss.gif"></A>
              <A class="feedsText" href="http://cwiki.apache.org/confluence/spaces/rss.action?key=OPENEJB&newPages=false">Site</A>
            </LI>

            <LI><A href="http://cwiki.apache.org/confluence/spaces/blogrss.action?key=OPENEJB">
              <IMG src="http://openejb.apache.org/images/rss.gif"></A>
              <A class="feedsText" href="http://cwiki.apache.org/confluence/spaces/blogrss.action?key=OPENEJB">News</A>
            </LI>
            </UL>
          </SPAN>
        </TD>
        <TD class="Col2">&nbsp;</TD>
        <TD class="Col3">
          <TABLE id="PageHeader" border="0" width="100%">
            <TR>
              <TD>
                <A href="http://openejb.org/">
                  <IMG hspace="0" src="http://openejb.apache.org/images/logo_openejb.gif" vspace="0">
                </A>
              </TD>
              <TD align="right">
                <A href="http://www.apache.org/">
                  <IMG src="http://www.apache.org/images/asf-logo.gif" width="258" height="66">
                </A>
              </TD>
            </TR>
            <TR>
              <TD id="page_title">
                <!-- $TITLE -->
                Spring and OpenEJB 3.0
              </TD>

              <TD align="right">
                <BR><BR>
                <!-- Google CSE Search Box Begins  -->
                <FORM id="searchbox_010475492895890475512:_t4iqjrgx90" action="http://www.google.com/cse">
                  <INPUT type="hidden" name="cx" value="010475492895890475512:_t4iqjrgx90">
                  <INPUT type="hidden" name="cof" value="FORID:0">
                  <INPUT name="q" type="text" size="25">
                  <INPUT type="submit" name="sa" value="Search">
                </FORM>
                <SCRIPT type="text/javascript" src="http://www.google.com/coop/cse/brand?form=searchbox_010475492895890475512:_t4iqjrgx90"></SCRIPT>
                <!-- Google CSE Search Box Ends -->

              </TD>
            </TR>
          </TABLE>
          <P>
            <!-- $BODY -->
            <DIV id="PageContent">
              <DIV class="panelMacro"><TABLE class="noteMacro"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="https://cwiki.apache.org/confluence/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD>OpenEJB 3.1 and later users should refer to the <A href="spring.html" title="Spring">Spring</A> page.</TD></TR></TABLE></DIV>
<H1><A name="SpringandOpenEJB3.0-BootstrappingOpenEJBinSpring"></A>Bootstrapping OpenEJB in Spring</H1>

<P>If you wish to use OpenEJB inside Spring you can do so pretty easily.  Include OpenEJB and its dependencies in your classpath as you would in a plain embedded scenario then add a custom factory like the following:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>OpenEjbFactoryBean.java</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-keyword">public</SPAN> class OpenEjbFactoryBean <SPAN class="code-keyword">implements</SPAN> org.springframework.beans.factory.FactoryBean {

    <SPAN class="code-keyword">private</SPAN> Properties properties = <SPAN class="code-keyword">new</SPAN> Properties();

    <SPAN class="code-keyword">public</SPAN> OpenEjbFactoryBean() {
        properties.put(Context.INITIAL_CONTEXT_FACTORY, <SPAN class="code-quote">&quot;org.apache.openejb.client.LocalInitialContextFactory&quot;</SPAN>);
    }

    <SPAN class="code-keyword">public</SPAN> Properties getJndiEnvironment() {
        <SPAN class="code-keyword">return</SPAN> properties;
    }

    <SPAN class="code-keyword">public</SPAN> void setJndiEnvironment(Properties properties) {
        <SPAN class="code-keyword">this</SPAN>.properties.putAll(properties);
    }

    <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">Object</SPAN> getObject() {
        <SPAN class="code-keyword">try</SPAN> {
            <SPAN class="code-keyword">return</SPAN> <SPAN class="code-keyword">new</SPAN> InitialContext(properties);
        } <SPAN class="code-keyword">catch</SPAN> (NamingException e) {
            <SPAN class="code-keyword">throw</SPAN> <SPAN class="code-keyword">new</SPAN> RuntimeException(e);
        }
    }

    <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">Class</SPAN> getObjectType(){
        <SPAN class="code-keyword">return</SPAN> Context.class;
    }

    <SPAN class="code-object">boolean</SPAN> isSingleton() {
        <SPAN class="code-keyword">return</SPAN> <SPAN class="code-keyword">true</SPAN>;
    }
}
</PRE>
</DIV></DIV>

<P>And include that at the top of your spring xml file as follows:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>top of spring xml</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;bean id=<SPAN class="code-quote">&quot;OpenEjbContext&quot;</SPAN> class=<SPAN class="code-quote">&quot;org.acme.OpenEjbFactoryBean&quot;</SPAN>&gt;</SPAN>
  <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;jndiEnvironment&quot;</SPAN>&gt;</SPAN>
    <SPAN class="code-tag">&lt;props&gt;</SPAN>
      <SPAN class="code-tag">&lt;prop key=<SPAN class="code-quote">&quot;myDs&quot;</SPAN>&gt;</SPAN>new://Resource?type=DataSource<SPAN class="code-tag">&lt;/prop&gt;</SPAN>
      <SPAN class="code-tag">&lt;prop key=<SPAN class="code-quote">&quot;myDs.JdbcDriver&quot;</SPAN>&gt;</SPAN>com.mysql.jdbc.Driver<SPAN class="code-tag">&lt;/prop&gt;</SPAN>
      <SPAN class="code-tag">&lt;prop key=<SPAN class="code-quote">&quot;myDs.JdbcUrl&quot;</SPAN>&gt;</SPAN>jdbc:mysql://localhost/midastest?createDatabaseIfNotExist=true<SPAN class="code-tag">&lt;/prop&gt;</SPAN>
      <SPAN class="code-tag">&lt;prop key=<SPAN class="code-quote">&quot;myDs.UserName&quot;</SPAN>&gt;</SPAN>root<SPAN class="code-tag">&lt;/prop&gt;</SPAN>
      <SPAN class="code-tag">&lt;prop key=<SPAN class="code-quote">&quot;myDs.Password&quot;</SPAN>&gt;</SPAN><SPAN class="code-tag">&lt;/prop&gt;</SPAN>
    <SPAN class="code-tag">&lt;/props&gt;</SPAN>
  <SPAN class="code-tag">&lt;/property&gt;</SPAN>
<SPAN class="code-tag">&lt;/bean&gt;</SPAN>
</PRE>
</DIV></DIV>

<P>The value of &lt;props&gt; is meant to be illustrative of the kinds of properties you can pass into OpenEJB.  It's possible to create any number of datasources, topics, queues, containers and more this way.</P>

<P>Just as with Unit Testing, OpenEJB will find and automatically deploy all the EJB beans it <A href="application-discovery-via-the-classpath.html" title="Application discovery via the classpath">finds in the classpath</A>.  You can then expose any of these things to other Spring components with custom factory beans.</P>

<H1><A name="SpringandOpenEJB3.0-InjectingOpenEJBcreatedresourcesintoSpringcomponents"></A>Injecting OpenEJB-created resources into Spring components</H1>

<P>If you want to have any of the Topics, Queues, DataSources, EntityManagers or more that OpenEJB creates injected into components that Spring creates, here's one technique....</P>

<P>Let's say you have a persistence unit called &quot;<B>OrangeUnit</B>&quot; declared in a persistence.xml file.  One way to get the related <B>EntityManager</B> created by OpenEJB is to do as follows.  Create an @Stateless bean with an @PersistenceContext ref in it, then use a factory bean to look it up, pull the EntityManager out and return it</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>OrangeUnitBean.java</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
/*
 * OpenEJB will automatically find <SPAN class="code-keyword">this</SPAN> bean.  Just put it in the same jar
 * that your META-INF/persistence.xml file is located in and make sure that
 * that same jar file also has a META-INF/ejb-jar.xml file.  The ejb-jar.xml
 * need only contain the text <SPAN class="code-quote">&quot;&lt;ejb-jar/&gt;&quot;</SPAN> at minimum.
 */
@Stateless
<SPAN class="code-keyword">public</SPAN> class OrangeUnitBean <SPAN class="code-keyword">implements</SPAN> OrangeUnitLocal {

    @PersistenceContext(unitName=<SPAN class="code-quote">&quot;OrangeUnit&quot;</SPAN>)
    <SPAN class="code-keyword">private</SPAN> EntityManager entityManager;

    <SPAN class="code-keyword">public</SPAN> EntityManager getEntityManager() {
        <SPAN class="code-keyword">return</SPAN> entityManager;
    }
}
</PRE>
</DIV></DIV>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>OrangeUnitLocal.java</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
/**
 * The local <SPAN class="code-keyword">interface</SPAN> <SPAN class="code-keyword">for</SPAN> the OrangeUnitBean
 */
<SPAN class="code-keyword">public</SPAN> <SPAN class="code-keyword">interface</SPAN> OrangeUnitLocal {
   <SPAN class="code-keyword">public</SPAN> EntityManager getEntityManager();
}
</PRE>
</DIV></DIV>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>OrangeUnitFactoryBean.java</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
/**
 * This factory bean will lookup the OrangeUnitBean using the javax.naming.Context 
 * that is created via the OpenEjbFactoryBean above.  It will simply grab the EntityManager
 * from that bean and hand it over to Spring.  Anyone in Spring-land can then easily get 
 * a reference to the EntityManager by simply referencing <SPAN class="code-keyword">this</SPAN> factory bean.
 */
<SPAN class="code-keyword">public</SPAN> class OrangeUnitFactoryBean <SPAN class="code-keyword">implements</SPAN> org.springframework.beans.factory.FactoryBean {
    <SPAN class="code-keyword">private</SPAN> Context context;

    <SPAN class="code-keyword">public</SPAN> Context getContext() {
        <SPAN class="code-keyword">return</SPAN> context;
    }

    <SPAN class="code-keyword">public</SPAN> void setContext(Context context) {
        <SPAN class="code-keyword">this</SPAN>.context = context;
    }

    <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">Object</SPAN> getObject() {
        <SPAN class="code-keyword">try</SPAN> {
            ResourceLocal bean = (ResourceLocal) context.lookup(<SPAN class="code-quote">&quot;OrangeUnitBeanLocal&quot;</SPAN>);
            <SPAN class="code-keyword">return</SPAN> bean.getEntityManager();
        } <SPAN class="code-keyword">catch</SPAN> (NamingException e) {
            <SPAN class="code-keyword">throw</SPAN> <SPAN class="code-keyword">new</SPAN> RuntimeException(e);
        }
    }

    <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">Class</SPAN> getObjectType(){
        <SPAN class="code-keyword">return</SPAN> EntityManager.class;
    }

    <SPAN class="code-object">boolean</SPAN> isSingleton() {
        <SPAN class="code-keyword">return</SPAN> <SPAN class="code-keyword">true</SPAN>;
    }
}
</PRE>
</DIV></DIV>

<P>The factory bean would then be declared in your spring xml file as follows:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>in the spring xml</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;bean id=<SPAN class="code-quote">&quot;OrangeUnit&quot;</SPAN> class=<SPAN class="code-quote">&quot;org.acme.OrangeUnitFactoryBean&quot;</SPAN>&gt;</SPAN>
  <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;context&quot;</SPAN> ref=<SPAN class="code-quote">&quot;OpenEjbContext&quot;</SPAN>&gt;</SPAN>
<SPAN class="code-tag">&lt;/bean&gt;</SPAN>
</PRE>
</DIV></DIV>

<P>The EntityManager can then easily be consumed by a spring bean.</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>SomePojo.java</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-keyword">public</SPAN> class SomePojo {

    <SPAN class="code-keyword">private</SPAN> EntityManager entityManager;

    <SPAN class="code-keyword">public</SPAN> void setEntityManager(EntityManager entityManager) {
        <SPAN class="code-keyword">this</SPAN>.entityManager = entityManager;
    }
    
    ...
}
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>in the spring xml</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;bean id=<SPAN class="code-quote">&quot;SomePojo&quot;</SPAN> class=<SPAN class="code-quote">&quot;org.acme.SomePojo&quot;</SPAN>&gt;</SPAN>
  <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;entityManager&quot;</SPAN> ref=<SPAN class="code-quote">&quot;OrangeUnit&quot;</SPAN>&gt;</SPAN>
<SPAN class="code-tag">&lt;/bean&gt;</SPAN>
</PRE>
</DIV></DIV>

<P>Here's what all three declarations would look like together in your spring xml:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>spring bean definitions combined</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;bean id=<SPAN class="code-quote">&quot;OpenEjbContext&quot;</SPAN> class=<SPAN class="code-quote">&quot;org.acme.OpenEjbFactoryBean&quot;</SPAN>&gt;</SPAN>
  <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;jndiEnvironment&quot;</SPAN>&gt;</SPAN>
    <SPAN class="code-tag">&lt;props&gt;</SPAN>
      <SPAN class="code-tag">&lt;prop key=<SPAN class="code-quote">&quot;myDs&quot;</SPAN>&gt;</SPAN>new://Resource?type=DataSource<SPAN class="code-tag">&lt;/prop&gt;</SPAN>
      <SPAN class="code-tag">&lt;prop key=<SPAN class="code-quote">&quot;myDs.JdbcDriver&quot;</SPAN>&gt;</SPAN>com.mysql.jdbc.Driver<SPAN class="code-tag">&lt;/prop&gt;</SPAN>
      <SPAN class="code-tag">&lt;prop key=<SPAN class="code-quote">&quot;myDs.JdbcUrl&quot;</SPAN>&gt;</SPAN>jdbc:mysql://localhost/midastest?createDatabaseIfNotExist=true<SPAN class="code-tag">&lt;/prop&gt;</SPAN>
      <SPAN class="code-tag">&lt;prop key=<SPAN class="code-quote">&quot;myDs.UserName&quot;</SPAN>&gt;</SPAN>root<SPAN class="code-tag">&lt;/prop&gt;</SPAN>
      <SPAN class="code-tag">&lt;prop key=<SPAN class="code-quote">&quot;myDs.Password&quot;</SPAN>&gt;</SPAN><SPAN class="code-tag">&lt;/prop&gt;</SPAN>
    <SPAN class="code-tag">&lt;/props&gt;</SPAN>
  <SPAN class="code-tag">&lt;/property&gt;</SPAN>
<SPAN class="code-tag">&lt;/bean&gt;</SPAN>

<SPAN class="code-tag">&lt;bean id=<SPAN class="code-quote">&quot;OrangeUnit&quot;</SPAN> class=<SPAN class="code-quote">&quot;org.acme.OrangeUnitFactoryBean&quot;</SPAN>&gt;</SPAN>
  <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;context&quot;</SPAN> ref=<SPAN class="code-quote">&quot;OpenEjbContext&quot;</SPAN>&gt;</SPAN>
<SPAN class="code-tag">&lt;/bean&gt;</SPAN>

<SPAN class="code-tag">&lt;bean id=<SPAN class="code-quote">&quot;SomePojo&quot;</SPAN> class=<SPAN class="code-quote">&quot;org.acme.SomePojo&quot;</SPAN>&gt;</SPAN>
  <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;entityManager&quot;</SPAN> ref=<SPAN class="code-quote">&quot;OrangeUnit&quot;</SPAN>&gt;</SPAN>
<SPAN class="code-tag">&lt;/bean&gt;</SPAN>
</PRE>
</DIV></DIV>

<DIV class="panelMacro"><TABLE class="infoMacro"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="https://cwiki.apache.org/confluence/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B>Some more useful info.</B><BR>Here is a bunch of links suggested by a user. If anybody has time to go through them and write a doc, that would be great. These links explain how to make available spring components to openejb
<A href="http://twasink.net/blog/archives/2007/01/using_spring_wi.html" class="external-link" rel="nofollow">http://twasink.net/blog/archives/2007/01/using_spring_wi.html</A>
<A href="http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/ejb/interceptor/SpringBeanAutowiringInterceptor.html" class="external-link" rel="nofollow">http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/ejb/interceptor/SpringBeanAutowiringInterceptor.html</A>
<A href="http://wiki.netbeans.org/MavenSpringEJBsOnGlassfish" class="external-link" rel="nofollow">http://wiki.netbeans.org/MavenSpringEJBsOnGlassfish</A></TD></TR></TABLE></DIV> 

            </DIV>
          </P>
        </TD>
        <TD class="Col4"><IMG src="http://openejb.apache.org/images/dotTrans.gif"></TD>
        <TD class="Col5">
          
            
            </TD>
      </TR>
      <TR class="Row5">
        <TD class="Col1">&nbsp;</TD>
        <TD class="Col2">&nbsp;</TD>
        <TD class="Col3">
          <BR>
          <BR>
          <IMG width="100%" height="1" src="http://openejb.apache.org/images/line_light.gif">
          <TABLE width="100%">
            <TR>
              <TD>
                <SPAN class="bodyGrey">
                  <SMALL>
                    <NOTICE><!-- $FOOTER -->
                      Apache OpenEJB is an project of The Apache Software Foundation (ASF)
                    </NOTICE>
                    <BR>
                    Site Powered by
                    <A href="http://atlassian.com/">Atlassian</A>
                    <A href="http://atlassian.com/confluence/">Confluence</A>
                    .
                  </SMALL>
                </SPAN>
              </TD>
              <TD align="right">
                <A style="color:#999;font-size:small;font-weight:normal;" href="https://cwiki.apache.org/confluence/pages/editpage.action?spaceKey=OPENEJBx30&title=Spring%20and%20OpenEJB%203.0">[ edit ]</A>
              </TD>
            </TR>
          </TABLE>
          <BR>
        </TD>
        <TD class="Col4"><IMG src="http://openejb.apache.org/images/dotTrans.gif"></TD>
        <TD class="Col5">&nbsp;</TD>
      </TR>
    </TABLE>

    <!-- Needed for composition plugin -->
    <!-- delay the loading of large javascript files to the end so that they don't interfere with the loading of page content -->
    <SPAN style="display: none">
      <SCRIPT type="text/javascript" language="JavaScript" src="http://cwiki.apache.org/confluence/labels-javascript"></SCRIPT>

      <SCRIPT src="http://www.google-analytics.com/urchin.js" type="text/javascript">
      </SCRIPT>
      <SCRIPT type="text/javascript">
        _uacct = "UA-2717626-1";
        urchinTracker();
      </SCRIPT>
    </SPAN>

  </BODY>
</HTML>